<p-dialog
  [(visible)]="modalService.forgetPasswordModal"
  [style]="{ width: '450px' }"
  [modal]="true"
  styleClass="p-fluid"
  (onHide)="onClose()"
>
  <div class="main-container">
    <div class="container">
      <div class="login-header">
        <p class="caption text-cian-dark">პაროლის აღდგენა</p>
      </div>
      <div class="login-body">
        <form [formGroup]="form" (ngSubmit)="onSubmit()">
          <div *ngIf="verificationStatus !== 'done'" class="mail">
            <div class="form-input mx-2 my-3 position-relative">
              <label for="email" class="text-sm px-3">Email</label>
              <input
                class="rounded-input text-sm"
                type="email"
                formControlName="email"
                id="email"
                autocomplete="off"
                placeholder="შეიყვანეთ მეილი"
                [autofocus]="true"
              />
              <button
                *ngIf="canSentMail && isEmailValid"
                pButton
                icon="pi pi-envelope"
                type="button"
                class="p-button-text p-button-rounded"
                (click)="onEmail()"
                style="
                  position: absolute;
                  right: 6px;
                  top: 1.85rem;
                  width: 26px;
                  height: 26px;
                "
              ></button>
              <span *ngIf="!isEmailValid" class="text-danger text-sm mx-3"
                >მეილი აუცილებელია</span
              >
            </div>

            <div
              *ngIf="isCodeSent"
              class="form-input mx-2 my-3 position-relative"
            >
              <label for="code" class="text-sm px-3">აქტივაციის კოდი</label>
              <input
                class="rounded-input text-sm"
                type="text"
                formControlName="code"
                id="code"
                placeholder="შეიყვანეთ აქტივაციის კოდი"
              />
              <button
                pButton
                icon="{{ verificationStatusIcon }}"
                type="button"
                class="p-button-text p-button-rounded"
                (click)="onVerification()"
                style="
                  position: absolute;
                  right: 6px;
                  top: 1.85rem;
                  width: 26px;
                  height: 26px;
                "
              ></button>
              <span class="text-danger text-sm mx-3">{{
                emailVerifyValidation === true
                  ? ""
                  : emailVerifyValidation.join(",\n")
              }}</span>
            </div>
          </div>

          <div *ngIf="verificationStatus === 'done'" class="password w-100">
            <div class="w-100">
              <div class="form-input mx-2 my-3">
                <label for="newPassword" class="text-sm px-3"
                  >ახალი პაროლი</label
                >
                <input
                  class="rounded-input text-sm"
                  type="password"
                  formControlName="newPassword"
                  id="newPassword"
                  autocomplete="off"
                  placeholder="( მინიმუმ 8 სიმბოლო : @ 7 , )"
                />
                <span class="text-danger text-sm mx-3"
                  >{{
                    isPasswordValid === true ? "" : isPasswordValid.join(",\n")
                  }}
                </span>
              </div>
            </div>
            <div class="w-100">
              <div class="form-input mx-2 my-3">
                <label for="confirmPassword" class="text-sm px-3"
                  >დაადასტურეთ პაროლი</label
                >
                <input
                  class="rounded-input text-sm"
                  type="password"
                  formControlName="confirmPassword"
                  id="confirmPassword"
                  autocomplete="off"
                />
                <span class="text-danger text-sm mx-3"
                  >{{ isConfirmPasswordMach ? "" : "პაროლი არ ემთხვევა" }}
                </span>
              </div>
            </div>
            <div class="d-flex m-3" style="justify-content: end">
              <button
                [disabled]="form.valid"
                pButton
                label="შეცვლა"
                type="submit"
                class="p-button-sm p-button-rounded bg-default"
                style="max-width: 40%"
              ></button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</p-dialog>

<!-- toast -->
<p-toast position="top-center"></p-toast>
